# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    tags:
      - 'staging*'

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v4

      # Runs a single command using the runners shell
      - name: Get App Name and Version 2
        run : |
          echo "APP_NAME=$(echo ${{ github.ref_name }} | cut -d'_' -f2 | tr '[:lower:]' '[:upper:]')" >> $GITHUB_ENV
          echo "APP_VERSION=$(echo ${{ github.ref_name }} | cut -d'_' -f3)" >> $GITHUB_ENV
          
      - name: Show App Name and Version 2
        run: |
          echo ${{ env.APP_NAME }}
          echo ${{ env.APP_VERSION }}

      # upload filr from path ../../test.apk to gdrive    
      - name: Upload to gdrive
        uses: adityak74/google-drive-upload-git-action@main
        with:
          credentials: ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAibWFzc2l2ZS1jYXBzdWxlLTQ0NDUwMy1zMiIsCiAgInByaXZhdGVfa2V5X2lkIjogIjU5YWRjZWFhY2M2YzVkYWU1MjIzODZmODk4YmIwMGM2N2Q2NTM2NGYiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRQ21UckVDRHNFSjNEUWxcblJkQXU5dWxKR0xpb2ZvUUhaVm1IaDBHV2dDaWJLUnJMcSszR0R4bTlreHNEWE5ucTlyYXlTOVF2c0t0NFk4UHlcbml3b2lsaURDQzJsNGRPbXozdldVOU1XRGpRdlZIYklsSFl2aS9WSXk4MFZZZjMwZG5qQ1FsZkIrYS8rNUlheFdcbkQwdmFKRDk4VDc3UFZkT0ZMc3ZwZG1TQ0VPeW85UExrMVJKOGdYclRLb0JBQXJnQkdnYjNqNWJHd1lMT2pESkFcbitSbytTL0NNdVJ3Z1FadzJRSDFtZTlLTFA4VWN4SE5KbFM2SWs2U1VUd3h1OW1LMTM3ZTFVMUpNaWtTZVNKWm1cbnVOWWkzcEw0Q1YyRnFQRlF2ZWpDRHc0RnhOejNiMmlqTUluS2J4blBEalYxQy9CQ0g4SWo4VkVhMCtLK0NvYkdcblkrQ2hCRFhyQWdNQkFBRUNnZ0VBRnBNWDgrK014SW5maWkrdjByQXhlbnFnbGo2V0xXclVmRkVmMWc0UGRRQmZcbllzWXp3RzdNVDY5b08weWZTQVcxUnY2RUR2VXNVV3M1YmZMeHJVQXpzaU5hYmI5dytibUtIRzRkWVg0RDNTbnFcbnhKNytIaEhFMXFXdkJCUktKM3NSbkk2OTFtdFNpdzdIRmVkOXBGN0hQMWlUemhFWVpUdTA4anZmNk1maldBdXZcbjJFbk9QN0tVMUx0M2JybU9WbXFzQUhVK1dEZmRBY0NlZExleXNScS9lUTdTL3JDZjZOaGRueHBzVm9oUnU5MWlcbkVoam51S2Y5OERtcDZxdnZHYzJ2czlKMEhUa0t0eGcvRFNxcUgyNnBxSkUrajFoWTF3dE9FZXdEVWJqcHAzTWJcbm1leDBaUXpFMWhTK3Z5ZHdQelRyT0ZtNmNqVVV2b0JoR1l0N3F2UGFBUUtCZ1FEWVlob2xTdVVpajV5dDRmRkFcbkVMem91eGYxSG5QRDh4KzZvM2NTdXdyQWFYZE0zc3NqTmxZREcwaEd1UjJ5YXlVTENXalIyemlqQXFXdmN2d3Fcbjk5MmxoV29DZUVyblNxMkFmdjBSS2p4aXdFU1FZZHowclFsdUR5dTAwTWMyNXBQeE04ajh3MnNzb1FWUWp5aXhcbnVxMnB3QnBFU1lWMXZUUExsQXEvSFBtbGJ3S0JnUURFd1lnWFI3QURWWUNVWUZlSjVZTzVpclJ4WXBtUS8yZmJcbllCZnF0bStzemlCUHlhVjZHOE9kaURVUEJDK2w2VncrWGNrV0w2cDRsWll4bERaQXlTYWh6R1ZtWmtsRC83aldcbk5ib3RxTG5lZzIwZFBPdjdScFFhRm9MM3FTREdTUitGeTBKTjU2d285RFIvQjhnWWxSd25xYTdwZXpnZ0FoS1pcblRMRHNZWVhSUlFLQmdBN2F0VGJJTEhDeDhTeVNyVEFidGd3NEE4NEUrQ2VFZ2pJYTFLckpnbFJ4S1FweTVQa1dcbjJ0Szl4Ymx0TGRlNHVVTkhzeFZzK2pkZWtDYzZPb3RzbHArdFIvakJiMHJ2ZW5ldXdBcTBubzZjNmxnTEQ5TVFcbktleVBTQTNTbzBwbWk5TnNIYWtVZFVBTUVjUlUvNU1yNEk0ZHJPL3hLQ05NQ01rNThYN3JLMHdyQW9HQkFMRW9cblZLSXBnUmt2Wm11eTUzOFpNZWJoTmlHVmx4SVFkZkgzN3ZEK1BVVkovNXYzdzFCVUtXanhXRnpoOXdrYk9seEpcblU2THZYajNlNm5KUHNoM1pRRGlVOG9RbCt6Z0h5K1RNVVl1RkRYNkZ0YnlLdXl2djI3QTFyc3pSOHRtMnczUlRcbmxLclN1NWZRY21naW1JOVJ5eDBIVXArVnUrNU9EM01LczQ3VExJdEZBb0dCQUtKZjVwTWlBL3dYbUlEN3NRTi9cbmlSV09Deks1SW9CV0wybUNrRGJPa1dYQm9MeUtBNmZHK3lnamxEdVBhd0tqRFFRR0RMSWxmdC9JZXFYVDFGaDlcbk1OcnZ5RDRQSDFMOHFsUVNCZVBORjdKbnk5L3EwVG9EY3pwZytKSUYvZXlldEJSWnJvV3JRalltcHRuMTFhMzNcbjVaK2tqZ041QkgvUkZVeVFJTGpUdWdxNVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogImF1dG8tdXBsb2FkLXRvLWdvb2xlLWRyaXZlQG1hc3NpdmUtY2Fwc3VsZS00NDQ1MDMtczIuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTEzMjE5NTE1MTgzNjUwNTcxODEzIiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAogICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwKICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9hdXRvLXVwbG9hZC10by1nb29sZS1kcml2ZSU0MG1hc3NpdmUtY2Fwc3VsZS00NDQ1MDMtczIuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJ1bml2ZXJzZV9kb21haW4iOiAiZ29vZ2xlYXBpcy5jb20iCn0K
          filename: ${{ github.workspace }}/test.apk
          folderId: 1hx592gyMLFvnXMXVhLNAZVeDUv7YrAmX
          name: "test.a" # optional string
          overwrite: "true" # optional boolean


