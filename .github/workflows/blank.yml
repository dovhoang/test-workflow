# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    tags:
      - 'staging*'

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v4

      # Runs a single command using the runners shell
      - name: Get App Name and Version 2
        run : |
          echo "APP_NAME=$(echo ${{ github.ref_name }} | cut -d'_' -f2 | tr '[:lower:]' '[:upper:]')" >> $GITHUB_ENV
          echo "APP_VERSION=$(echo ${{ github.ref_name }} | cut -d'_' -f3)" >> $GITHUB_ENV
          
      - name: Show App Name and Version 2
        run: |
          echo ${{ env.APP_NAME }}
          echo ${{ env.APP_VERSION }}

      # upload filr from path ../../test.apk to gdrive    
      - name: Upload to gdrive
        uses: adityak74/google-drive-upload-git-action@main
        with:
          credentials: ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAibWFzc2l2ZS1jYXBzdWxlLTQ0NDUwMy1zMiIsCiAgInByaXZhdGVfa2V5X2lkIjogImY0MzM4MjU2ZGM5YjJiODlkZjgwZGQzZDk3ZjYwOWI4OGQ2NjI2NmIiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRRFBxSlk4a1JBZlZXUHlcbmFJYTRLak9mWVdtR1BuU1hNUHlORVhMRS9DZ3drMEhOMkZrVjYxdUtYeVVZMFh6cHR3bFg2NDMrYTVBdHhueElcbklrWVBKL2lSeitlWnhwQmRXcHBpSHN4OFprZ3c5dFp1a1RNeTFuWnlmWTA5OVZYK0trUENFMXMvYTNKWjVzV0RcbjV0eFVYRm11RTRIbjJBRFFzbHRsUWExQ0dHaXRsbEVCdS9RbmNrdVZoUUhHaWlBMHYrMXFtOGlUbmVnd2I1WHVcbnFBeWpmaEdvU0UzM29CNGhHejd2OHZ4L1Vid1N3OU5lR3VJWlg3M2xncm1HUGhod2FxRk4ySC9RTUdLRmRFNGxcblVWZld0Q2dGWjR4MjRZdjhEQzBaK0RydlFHemlYdFlzZzFsTE9hb3RwSU1hWmxHd1lBNmdyZW5Bc3JOdjVpa3hcbnNqTkNRbXIxQWdNQkFBRUNnZ0VBS24rWnM2NktpcWNhcTk4NWh4SlgrMHZmNFZJQjRYbHNqbUJlU1RORDlHRUdcbnpCNTFhUGVBaGdxZjJIcnpJZy9NTVRxcmxrQ2tRc0lHNkdwZlJUWE1lT2NBUXFmeEhySHV1NXNMQllDWFVMSUxcbnc1Z2l6c28yZG9yOGI0dzR1Nm9oc09QdVBrWDZvcXlJaXN5aUZmL0tlTVpVUlVNZk01YjAvbjJZL0ZocmYrN1Bcbm9wT3Z2QWdueFZoemxkRjJ2ekV1M1B1YkhIclV4OElCL3JLNHcycTlVNXVmekQzK0JUMURRUXdsVklWamx1ZjJcblFrUWs2ZVlmSktQd0tVd1Yzb3NRcE8vcXc2bS9tVDJ1R0dCTjEwSDdneEVqZVFUUEVOb21Qb3R2WU9YbEFpRlJcbm16cVo1RjlZdFRieTBybytzYS9hV0NmRFVOY3JicFpoY2QrZ3Z4Y2pJUUtCZ1FEcnR2YTc1YlVYS0VKM0tyMGJcbnZIVTJxRUVHMXEvMm5pRjVIRWVzdHh1WE1iczVQYlRDWXhJaU1nNnZ2UnVMM3JDdW14TC9qdVlzOWFjT1VLdXZcbkxlS2RkQ2RaeDA0bGpGVkdGODFtTVA0R0NYN05FRDhmVXFJNjBBcFY4eGxVbTFzNUFPU1crM2JaZUxvVXdVWFZcbi9OU2NUUW5USkttRDgrL3RCWUlnM1dsQWtRS0JnUURoaDRSaXkveG5qMXFoVVF3RmRaeU1CVjVRaldvUExzcVBcbitpL25vdkxhMkJxaEtMUFNHQ2hQUDZ4dENtSTgvR0QrdDc0dHBXby9rTUhXdU81bGJqalNJNXFjNTZ3MVZyS21cbm9pSzlyRkdkLzYwSXhGK1A3azJYWW9KdHJXZktlRmpQOVlpN0R5TjFoMHV0U3VwaUx3dE1UbEJSUlRyZldBdFlcbkk2ZVhIbFcySlFLQmdRQ3JRR3lXS3RlY2tYVm9tcloxOWorNmpCZGlYb3ZOUXluU2tjZEpKbWQzTzN4b28vbzFcbjJFQ09jNHZVQmpLRE5qRnJTZU5OcElaNlY2Y2RjV0txalUyOVUyeGJmNys0Ni9Id1VNNjcxaEJZVm9HM2Zudzlcbng0MXg2VC81SGZ0alN0UEY0RzR6ZTFMbndSeUFnOEszSzA5VWwydng2UXIzZ1R6cEdUMW5uelVlNFFLQmdRRGhcbkFuMzR2Q0FsaW9jWHIyN1krNUNtdXF4d25jYVZRMC9oK2ZGVm4rUEFxQjlaYnV5SnpvUlpIT1FCSG4wSTc1d3VcblJsQTk1bTFzNGhZakR2cjZ3ODk1Q1FDM1R3VW5ha3B2cWhBVFFSdGxFYlFuclJUUzJ5VWF4clB1alRXaWNoUFpcbjE5VUZISU42UFBRcC96Wjlvd1lZcVlIRXM5ZWJBWksvNjBMSHFRSkc2UUtCZ0hPamVqYU5uSVpzb2xLeDhSYjlcbldPb1RSVkFmNXd4bEo2L0lFZE1yWk1ZWGt3cG05aHNSdUh5SVRhNk9EVlRzWnFaMmRPZ0doMkNveGtjRXlrMDJcbndxcFBKZ2t3c28xZzEvK25SWjU0NGRUZTk2Vnl6ekdnMjNYbElnZE1xS3lBblNXWkJhaTVmRU9kRThqWGZVRURcbjc1cnozNUpGWjRaY20xSFpXVWZMdnNTU1xuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogImF1dG8tZ2dnQG1hc3NpdmUtY2Fwc3VsZS00NDQ1MDMtczIuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTA2ODE0MDcyNTc2MzUxNTM3NjMzIiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAogICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwKICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9hdXRvLWdnZyU0MG1hc3NpdmUtY2Fwc3VsZS00NDQ1MDMtczIuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJ1bml2ZXJzZV9kb21haW4iOiAiZ29vZ2xlYXBpcy5jb20iCn0K
          filename: $GITHUB_WORKSPACE/test.apk
          folderId: 1hx592gyMLFvnXMXVhLNAZVeDUv7YrAmX
          name: "test" # optional string
          overwrite: "true" 


